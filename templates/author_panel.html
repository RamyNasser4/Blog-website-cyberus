<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Author Panel</title>
</head>
<body>
    <h1>Author Panel</h1>
    <a href="{{ url_for('create_post') }}">Create New Post</a>
    <h2>Your Posts</h2>
    <ul>
        {% for post in posts %}
        <li>
            <h2>{{ post.title }}</h2>
            <p>{{ post.content }}- Likes:{{post.likes}}</p>
            {% if post.file_url %}
            {% set file_extension = post.file_url.split('.')[-1] %}
            {% if file_extension in ['mp4', 'avi', 'mov'] %}
            <video controls style="max-width: 200px;">
                   <source src="{{ url_for('static', filename='uploads/' ~ post.file_url) }}" type="video/{{ file_extension }}">
                Your browser does not support the video tag.
            </video>
            {% else %}
            <img src="{{ url_for('static', filename='uploads/' ~ post.file_url) }}" alt="Post media">
            {% endif %}
            {% endif %}
            <a href="{{ url_for('edit_post', post_id=post.id) }}">Edit</a>
            <form method="POST" action="{{ url_for('delete_post', post_id=post.id) }}">
                <button type="submit">Delete</button>
            </form>
        </li>
        {% endfor %}
    </ul>
    <a href="{{ url_for('logout') }}">Logout</a>
</body>
</html>
